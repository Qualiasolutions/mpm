---
phase: 01-foundation
plan: 04
type: execute
wave: 4
depends_on: ["01-01", "01-02", "01-03"]
files_modified: []
autonomous: true

must_haves:
  truths:
    - "All Phase 1 code is committed and pushed to GitHub"
    - "Vercel deployment is triggered and succeeds"
    - "Production URL is accessible"
  artifacts: []
  key_links: []
---

<objective>
Push all Phase 1 code to GitHub and deploy to Vercel using the CLI. This is the ship step after all foundation work is complete.

Purpose: Ensures the Phase 1 foundation is live and accessible. Every phase ends with a push + deploy.
Output: Code on GitHub, app deployed to Vercel.
</objective>

<execution_context>
@/home/qualia/.claude/get-shit-done/workflows/execute-plan.md
@/home/qualia/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/01-foundation/01-01-SUMMARY.md
@.planning/phases/01-foundation/01-02-SUMMARY.md
@.planning/phases/01-foundation/01-03-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Commit and push to GitHub</name>
  <files></files>
  <action>
    1. Run `git status` to see all changes from Phase 1.
    2. Stage all relevant files: `git add -A`
       - Verify `.env.local` is NOT staged (should be in .gitignore).
       - Verify `node_modules/` is NOT staged.
       - Verify the `nul` file is NOT staged (Windows artifact).
    3. Create a commit with a descriptive message summarizing Phase 1:
       ```
       feat(phase-1): foundation - auth, database, role-based access

       - Next.js 15 project scaffold with Supabase integration
       - Database migration: profiles table, RLS policies, access token hook
       - Auth pages: login, password reset, update password
       - Server Actions with Zod validation
       - Role-based route groups: (dashboard) and (admin)
       - Admin employee creation flow
       - Premium dark theme with gold accent UI
       ```
    4. Push to GitHub: `git push origin main`
       - If remote doesn't exist, create it first: `gh repo create Qualiasolutions/mpm --private --source=. --push`
       - If branch doesn't exist on remote, use `git push -u origin main`
  </action>
  <verify>
    Run `git status` -- working tree clean.
    Run `git log --oneline -1` -- latest commit matches our message.
    Verify `.env.local` is NOT in the commit: `git show --stat HEAD` should not list .env.local.
  </verify>
  <done>
    All Phase 1 code committed and pushed to GitHub. No secrets in the commit.
  </done>
</task>

<task type="auto">
  <name>Task 2: Deploy to Vercel</name>
  <files></files>
  <action>
    1. Check if Vercel CLI is installed: `npx vercel --version`
       - If not installed, install it: `npm i -g vercel`

    2. Check if project is linked to Vercel: look for `.vercel/project.json`
       - If not linked, run `npx vercel link` and follow prompts (or use `npx vercel --yes` for auto-setup)

    3. Set required environment variables on Vercel (if not already set):
       ```
       npx vercel env add NEXT_PUBLIC_SUPABASE_URL production
       npx vercel env add NEXT_PUBLIC_SUPABASE_ANON_KEY production
       npx vercel env add SUPABASE_SERVICE_ROLE_KEY production
       npx vercel env add NEXT_PUBLIC_SITE_URL production
       ```
       NOTE: Only set these if they haven't been set before. Check with `npx vercel env ls`.

    4. Deploy to production: `npx vercel --prod`

    5. Verify the deployment URL is accessible.

    6. Record the deployment URL in the summary.
  </action>
  <verify>
    Deployment completes without errors.
    Production URL returns a response (even if it redirects to /login, that's correct behavior).
  </verify>
  <done>
    App deployed to Vercel production. URL recorded.
  </done>
</task>

</tasks>

<verification>
1. `git status` shows clean working tree
2. `git log --oneline -1` shows Phase 1 commit
3. GitHub repository has latest code
4. Vercel deployment succeeded
5. Production URL is accessible
6. No secrets committed to git
</verification>

<success_criteria>
- All Phase 1 code is on GitHub
- Vercel production deployment is live
- No .env.local or secrets in the repository
- Deployment URL works (redirects to /login for unauthenticated users)
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation/01-04-SUMMARY.md`
</output>
